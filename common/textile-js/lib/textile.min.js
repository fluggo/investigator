!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("textile",[],t):"object"==typeof exports?exports.textile=t():e.textile=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){return t=s(s({},r.defaults),t||{}),l(e,t).map(i).join("")}var s=n(1),a=n(2),i=a.toHTML,c=n(6),l=c.parseFlow,o=n(3),p=o.parseHtml;e.exports=r,r.defaults={breaks:!0},r.setOptions=r.setoptions=function(e){return s(r.defaults,e),this},r.parse=r.convert=r,r.html_parser=p,r.jsonml=function(e,t){return t=s(s({},r.defaults),t||{}),["html"].concat(l(e,t))},r.serialize=i},function(e,t){"use strict";e.exports=function(e,t){if(t)for(var n in t)e[n]=t[n];return e}},function(e,t,n){"use strict";function r(e,t){return t?e.map(function(e){if(/^\n\t+/.test(e))if(t<0)e=e.slice(0,t);else for(var n=0;n<t;n++)e+="\t";else if(Array.isArray(e))return r(e,t);return e}):e}function s(e,t){return e.replace(/&(?!(#\d{2,}|#x[\da-fA-F]{2,}|[a-zA-Z][a-zA-Z1-4]{1,6});)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,t?"&quot;":'"').replace(/'/g,t?"&#39;":"'")}function a(e){if(e=e.concat(),"string"==typeof e)return s(e);var t=e.shift(),n={},r="",l=[];for(e.length&&"object"===i(e[0])&&!Array.isArray(e[0])&&(n=e.shift());e.length;)l.push(a(e.shift()));for(var o in n)r+=null==n[o]?" "+o:" "+o+'="'+s(String(n[o]),!0)+'"';return"!"===t?"<!--"+l.join("")+"-->":t in c||t.indexOf(":")>-1&&!l.length?"<"+t+r+" />":"<"+t+r+">"+l.join("")+"</"+t+">"}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(3).singletons;e.exports={reIndent:r,toHTML:a,escape:s}},function(e,t,n){"use strict";function r(){return!0}function s(e){return h.exec(e)}function a(e){return x.exec(e)}function i(e){return g.exec(e)}function c(e){return v.exec(e)}function l(e){for(var t={},n=void 0;n=d.exec(e);)t[n[1]]="string"==typeof n[2]?n[2].replace(/^(["'])(.*)\1$/,"$2"):null,e=e.slice(n[0].length);return t}function o(e,t,n){var a=[],o=!1,p=t?function(e){return e in t}:r,u=p,d={},h=0,v=void 0;e=f(String(e));do if((v=s(e))&&p("!"))a.push({type:A,data:v[1],pos:e.index(),src:v[0]}),e.advance(v[0]);else if((v=c(e))&&p(v[1])){var g={type:b,tag:v[1],pos:e.index(),src:v[0]};if(e.advance(v[0]),a.push(g),d[g.tag]--,h--,n&&(!h||!d[g.tag]<0||isNaN(d[g.tag])))return a;o&&(o=null,p=u)}else if((v=i(e))&&p(v[1])){var x={type:v[3]||v[1]in m?$:y,tag:v[1],pos:e.index(),src:v[0]};v[2]&&(x.attr=l(v[2])),"script"!==v[1]&&"code"!==v[1]&&"style"!==v[1]||(o=x.tag,p=function(e){return e===o}),x.type===y&&(h++,d[x.tag]=(d[x.tag]||0)+1),a.push(x),e.advance(v[0])}else v=/([^<]+|[^\0])/.exec(e),v&&a.push({type:S,data:v[0],pos:e.index(),src:v[0]}),e.advance(v?v[0].length||1:1);while(e.valueOf());return a}function p(e,t){for(var n=[],r=[],s=n,a=void 0,i=0;i<e.length;i++)if(a=e[i],a.type===A)s.push(["!",a.data]);else if(a.type===S||a.type===k)s.push(a.data);else if(a.type===$)s.push(a.attr?[a.tag,a.attr]:[a.tag]);else if(a.type===y){var c=a.attr?[a.tag,a.attr]:[a.tag];s.push(c),r.push(c),s=c}else if(a.type===b){if(r.length)for(var l=r.length-1;l>=0;l--){var o=r[l];if(o[0]===a.tag){r.splice(l),s=r[r.length-1]||n;break}}if(!r.length&&t)return n.sourceLength=a.pos+a.src.length,n}return n.sourceLength=a?a.pos+a.src.length:0,n}var u=n(4),f=n(5);u.pattern.html_id="[a-zA-Z][a-zA-Z\\d:]*",u.pattern.html_attr="(?:\"[^\"]+\"|'[^']+'|[^>\\s]+)";var d=u.compile(/^\s*([^=\s]+)(?:\s*=\s*("[^"]+"|'[^']+'|[^>\s]+))?/),h=u.compile(/^<!--(.+?)-->/,"s"),v=u.compile(/^<\/([:html_id:])([^>]*)>/),g=u.compile(/^<([:html_id:])((?:\s[^=\s\/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>/),x=u.compile(/^\s*<([:html_id:](?::[a-zA-Z\d]+)*)((?:\s[^=\s\/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>/),m={area:1,base:1,br:1,col:1,embed:1,hr:1,img:1,input:1,link:1,meta:1,option:1,param:1,wbr:1},y="OPEN",b="CLOSE",$="SINGLE",S="TEXT",A="COMMENT",k="WS";e.exports={singletons:m,tokenize:o,parseHtml:p,parseHtmlAttr:l,testCloseTag:c,testOpenTagBlock:a,testOpenTag:i,testComment:s}},function(e,t){"use strict";var n={},r=e.exports={pattern:{punct:"[!-/:-@\\[\\\\\\]-`{-~]",space:"\\s"},escape:function(e){return e.replace(/[\-\[\]\{\}\(\)\*\+\?\.,\\\^\$\|#\s]/g,"\\$&")},collapse:function(e){return e.replace(/(?:#.*?(?:\n|$))/g,"").replace(/\s+/g,"")},expandPatterns:function(e){return e.replace(/\[:\s*(\w+)\s*:\]/g,function(t,n){var s=r.pattern[n];if(s)return r.expandPatterns(s);throw new Error("Pattern "+t+" not found in "+e)})},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},compile:function(e,t){r.isRegExp(e)&&(1===arguments.length&&(t=(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")),e=e.source);var s=e+(t||"");if(s in n)return n[s];var a=r.expandPatterns(e);return t&&/x/.test(t)&&(a=r.collapse(a)),t&&/s/.test(t)&&(a=a.replace(/([^\\])\./g,"$1[^\\0]")),t=(t||"").replace(/[^gim]/g,""),n[s]=new RegExp(a,t)}}},function(e,t){"use strict";e.exports=function(e){var t=String(e),n=void 0,r=0,s={index:function(){return r},save:function(){return n=r,s},load:function(){return r=n,e=t.slice(r),s},advance:function(n){return r+="string"==typeof n?n.length:n,e=t.slice(r)},skipWS:function(){var n=/^\s+/.exec(e);return n?(r+=n[0].length,e=t.slice(r),n[0]):""},lookbehind:function(e){return e=null==e?1:e,t.slice(r-e,r)},startsWith:function(t){return e.substring(0,t.length)===t},slice:function(t,n){return null!=n?e.slice(t,n):e.slice(t)},valueOf:function(){return e},toString:function(){return e}};return s}},function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var s=1;s<n.length;s++){var a=n[s];if(null!=a)for(var i in a)I.call(a,i)&&(e[i]=a[i])}return e}function s(e,t,n,r,s){t=t||"p";var a=[];return e.split(/(?:\r?\n){2,}/).forEach(function(e,i){"p"===t&&/^\s/.test(e)?(e=e.replace(/\r?\n[\t ]/g," ").trim(),a=a.concat(m(e,s))):(r&&i&&a.push(r),a.push(n?[t,n].concat(m(e,s)):[t].concat(m(e,s))))}),a}function a(e,t){var n=i(),l=void 0,p=void 0;for(e=c(e.replace(/^( *\r?\n)+/,""));e.valueOf();)if(e.save(),p=F.exec(e))l||(l={}),e.advance(p[0]),l[p[1]]=p[2];else{if(n.linebreak(),p=H.exec(e)){e.advance(p[0]);var x=p[0],y=$(e,x);if(y&&(e.advance(y[0]),y=y[1]),p=/^\.(\.?)(?:\s|(?=:))/.exec(e)){var S=!!p[1],_=S?Z:M;if("bc"!==x&&"pre"!==x||(_=S?R:q),p=_.exec(e.advance(p[0])),e.advance(p[0]),"bq"===x){var T=p[1];(p=/^:(\S+)\s+/.exec(T))&&(y||(y={}),y.cite=p[1],T=T.slice(p[0].length));var E=s(T,"p",b(y,{cite:1,id:1}),"\n",t);n.add(["blockquote",y,"\n"].concat(E).concat(["\n"]))}else if("bc"===x){var W=y?b(y,{id:1}):null;n.add(["pre",y,W?["code",W,p[1]]:["code",p[1]]])}else if("notextile"===x)n.merge(u(f(p[1])));else if("###"===x);else if("pre"===x)n.add(["pre",y,p[1]]);else if(N.test(x)){var z=x.replace(/\D+/g,"");y||(y={}),y.class=(y.class?y.class+" ":"")+"footnote",y.id="fn"+z,n.add(["p",y,["a",{href:"#fnr"+z},["sup",z]]," "].concat(m(p[1],t)))}else n.merge(s(p[1],x,y,"\n",t));continue}e.load()}if(p=v(e))e.advance(p[0]+(/(?:\s*\n+)+/.exec(e)||[])[0]),n.add(["!",p[1]]);else{if(p=g(e)){var P=p[1];if(P in C)if(p[3]||P in h){if(e.advance(p[0]),/^\s*(\n|$)/.test(e)){var I=[P];p[2]&&I.push(d(p[2])),n.add(I),e.skipWS();continue}}else if("pre"===P){var G=f(e,{pre:1,code:1},P),B=u(G,!0);if(e.load().advance(B.sourceLength),/^\s*(\n|$)/.test(e)){n.merge(B),e.skipWS();continue}}else if("notextile"===P){for(var X=f(e,null,P),J=1;/^\s+$/.test(X[J].src);)J++;var K=u(X.slice(J,-1),!0),Q=X.pop();if(e.load().advance(Q.pos+Q.src.length),/^\s*(\n|$)/.test(e)){n.merge(K),e.skipWS();continue}}else{e.skipWS();for(var U=f(e,null,P),V=U.pop(),Y=1;U[Y]&&/^[\n\r]+$/.test(U[Y].src);)Y++;if(V.tag===P){var ee=U.length>1?e.slice(U[Y].pos,V.pos):"";if(e.advance(V.pos+V.src.length),/^\s*(\n|$)/.test(e)){var te=[P];if(p[2]&&te.push(d(p[2])),"script"===P||"style"===P)te.push(ee);else{var ne=ee.replace(/^\n+/,"").replace(/\s*$/,""),re=/\n\r?\n/.test(ne)||"ol"===P||"ul"===P,se=re?a(ne,t):m(ne,r({},t,{breaks:!1}));(re||/^\n/.test(ee))&&te.push("\n"),(re||/\s$/.test(ee))&&se.push("\n"),te=te.concat(se)}n.add(te),e.skipWS();continue}}}e.load()}(p=D.exec(e))?(e.advance(p[0]),n.add(["hr"])):(p=A(e))?(e.advance(p[0]),n.add(k(p[0],t))):(p=w(e))?(e.advance(p[0]),n.add(O(p[0],t))):(p=j(e))?(e.advance(p[0]),n.add(L(p[1],t))):(p=M.exec(e),n.merge(s(p[1],"p",void 0,"\n",t)),e.advance(p[0]))}}return l?o(n.get(),l):n.get()}var i=n(7),c=n(5),l=n(4),o=n(8),p=n(3),u=p.parseHtml,f=p.tokenize,d=p.parseHtmlAttr,h=p.singletons,v=p.testComment,g=p.testOpenTagBlock,x=n(9),m=x.parsePhrase,y=n(10),b=y.copyAttr,$=y.parseAttr,S=n(13),A=S.testList,k=S.parseList,_=n(14),w=_.testDefList,O=_.parseDefList,T=n(15),j=T.testTable,L=T.parseTable,E=n(12),W=E.txblocks,z=E.txlisthd,P=E.txattr;l.pattern.txblocks=W,l.pattern.txlisthd=z,l.pattern.txattr=P;var C={p:0,hr:0,ul:1,ol:0,li:0,div:1,pre:0,object:1,script:0,noscript:0,blockquote:1,notextile:1},H=l.compile(/^([:txblocks:])/),M=l.compile(/^(.*?)($|\r?\n(?=[:txlisthd:])|\r?\n(?:\s*\n|$)+)/,"s"),Z=l.compile(/^(.*?)($|\r?\n(?=[:txlisthd:])|\r?\n+(?=[:txblocks:][:txattr:]\.))/,"s"),q=l.compile(/^(.*?)($|\r?\n(?:\s*\n|$)+)/,"s"),R=l.compile(/^(.*?)($|\r?\n+(?=[:txblocks:][:txattr:]\.))/,"s"),D=/^(\-\-\-+|\*\*\*+|___+)(\r?\n\s+|$)/,F=l.compile(/^\[([^\]]+)\]((?:https?:\/\/|\/)\S+)(?:\s*\n|$)/),N=/^fn\d+$/,I=Object.prototype.hasOwnProperty;t.parseFlow=a},function(e,t){"use strict";e.exports=function(e){var t=Array.isArray(e)?e:[];return{add:function(e){return"string"==typeof e&&"string"==typeof t[t.length-1]?t[t.length-1]+=e:Array.isArray(e)?t.push(e.filter(function(e){return void 0!==e})):e&&t.push(e),this},merge:function(e){for(var t=0,n=e.length;t<n;t++)this.add(e[t]);return this},linebreak:function(){t.length&&this.add("\n")},get:function(){return t}}}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function e(t,r){if(Array.isArray(t)){if("a"===t[0]){var s=t[1];"object"===("undefined"==typeof s?"undefined":n(s))&&"href"in s&&s.href in r&&(s.href=r[s.href])}for(var a=0,i=t.length;a<i;a++)Array.isArray(t[a])&&e(t[a],r)}return t}},function(e,t,n){"use strict";function r(e,t){e=s(e);var n=a(),c=void 0,o=void 0;do if(e.save(),e.startsWith("\r\n")&&e.advance(1),e.startsWith("\n"))e.advance(1),e.startsWith(" ")?e.advance(1):t.breaks&&n.add(["br"]),n.add("\n");else if(c=/^==(.*?)==/.exec(e))e.advance(c[0]),n.add(c[1]);else{var u=e.lookbehind(1),m=!u||/^[\s>.,"'?!;:()]$/.test(u);if((c=A.exec(e))&&(m||c[1])){e.advance(c[0]);var y=c[2],b=c[1],$=S[y],E="code"===$;(o=!E&&l(e,$,y))&&(e.advance(o[0]),o=o[1]);var W=void 0,z=void 0;if("["===b)W="^(.*?)",z="(?:])";else if("{"===b)W="^(.*?)",z="(?:})";else{var P=i.escape(y.charAt(0));W=E?"^(\\S+|\\S+.*?\\S)":"^([^\\s"+P+"]+|[^\\s"+P+"].*?\\S("+P+"*))",z="(?=$|[\\s.,\"'!?;:()«»„“”‚‘’])"}var C=i.compile(W+"("+i.escape(y)+")"+z);if((c=C.exec(e))&&c[1]){e.advance(c[0]),E?n.add([$,c[1]]):n.add([$,o].concat(r(c[1],t)));continue}e.load()}if((c=k.exec(e))||(c=_.exec(e))){e.advance(c[0]),o=c[1]&&l(c[1],"img");var H=o?o[1]:{src:""},M=["img",H];H.src=c[2],H.alt=c[3]?H.title=c[3]:"",c[4]&&(M=["a",{href:c[4]},M]),n.add(M)}else if(c=g(e))e.advance(c[0]),n.add(["!",c[1]]);else{if(c=x(e)){e.advance(c[0]);var Z=c[1],q=c[3]||c[1]in v,R=[Z];if(c[2]&&R.push(d(c[2])),q){n.add(R).add(e.skipWS());continue}var D=i.compile("^(.*?)(</"+Z+"\\s*>)","s");if(c=D.exec(e)){if(e.advance(c[0]),"code"===Z)R.push(c[1]);else{if("notextile"===Z){n.merge(f(h(c[1])));continue}R=R.concat(r(c[1],t))}n.add(R);continue}e.load()}if((c=L.exec(e))&&/\S/.test(u))e.advance(c[0]),n.add(["sup",{class:"footnote",id:"fnr"+c[1]},"!"===c[2]?c[1]:["a",{href:"#fn"+c[1]},c[1]]]);else if(c=w.exec(e)){e.advance(c[0]);var F=["span",{class:"caps"},c[1]];c[2]&&(F=["acronym",{title:c[2]},F]),n.add(F)}else if(m&&(c=O.exec(e))||(c=T.exec(e))){e.advance(c[0]);var N=c[1].match(j),I=N?c[1].slice(0,c[1].length-N[0].length):c[1];(o=l(I,"a"))?(I=I.slice(o[0]),o=o[1]):o={},N&&!I&&(I=N[0],N=""),o.href=c[2],N&&(o.title=N[1]),n.add(["a",o].concat(r(I.replace(/^(\.?\s*)/,""),t)))}else c=/([a-zA-Z0-9,.':]+|[ \f\r\t\v\xA0\u2028\u2029]+|[^\0])/.exec(e),c&&n.add(c[0]),e.advance(c?c[0].length||1:1)}}while(e.valueOf());return n.get().map(p)}var s=n(5),a=n(7),i=n(4),c=n(10),l=c.parseAttr,o=n(11),p=o.parseGlyph,u=n(3),f=u.parseHtml,d=u.parseHtmlAttr,h=u.tokenize,v=u.singletons,g=u.testComment,x=u.testOpenTag,m=n(12),y=m.ucaps,b=m.txattr,$=m.txcite;i.pattern.txattr=b,i.pattern.txcite=$,i.pattern.ucaps=y;var S={"*":"strong","**":"b","??":"cite",_:"em",__:"i","-":"del","%":"span","+":"ins","~":"sub","^":"sup","@":"code"},A=/^([\[\{]?)(__?|\*\*?|\?\?|[\-\+\^~@%])/,k=i.compile(/^!(?!\s)([:txattr:](?:\.[^\n\S]|\.(?:[^\.\/]))?)([^!\s]+?) ?(?:\(((?:[^\(\)]|\([^\(\)]+\))+)\))?!(?::([^\s]+?(?=[!-\.:-@\[\\\]-`{-~](?:$|\s)|\s|$)))?/),_=i.compile(/^\[!(?!\s)([:txattr:](?:\.[^\n\S]|\.(?:[^\.\/]))?)([^!\s]+?) ?(?:\(((?:[^\(\)]|\([^\(\)]+\))+)\))?!(?::([^\s]+?(?=[!-\.:-@\[\\\]-`{-~](?:$|\s)|\s|$)))?\]/),w=i.compile(/^((?!TM\)|tm\))[[:ucaps:]](?:[[:ucaps:]\d]{1,}(?=\()|[[:ucaps:]\d]{2,}))(?:\((.*?)\))?(?=\W|$)/),O=i.compile(/^"(?!\s)((?:[^"]|"(?![\s:])[^\n"]+"(?!:))+)"[:txcite:]/),T=/^\["([^\n]+?)":((?:\[[a-z0-9]*\]|[^\]])+)\]/,j=/\s*\(((?:\([^\(\)]*\)|[^\(\)])+)\)$/,L=/^\[(\d+)(!?)\]/;t.parsePhrase=r},function(e,t){"use strict";function n(e,t){if(e){var n={};for(var r in e)!(r in e)||t&&r in t||(n[r]=e[r]);return n}}function r(e){return/^(?:table|t[dh]|t(?:foot|head|body)|b[qc]|div|notextile|pre|h[1-6]|fn\\d+|p|###)$/.test(e)}function s(e,t,n){if(e=String(e),e&&"notextile"!==t){var s=void 0,m={},y={style:m},b=e,$=r(t),S="img"===t,A="li"===t,k=!$&&!S&&"a"!==t,_=S?o:l;do if(s=d.exec(b))s[1].split(";").forEach(function(e){var t=e.match(h);t&&(m[t[1]]=t[2])}),b=b.slice(s[0].length);else if(s=v.exec(b)){var w=b.slice(s[0].length);!w&&k||n&&n===w.slice(0,n.length)?s=null:(y.lang=s[1],b=b.slice(s[0].length))}else if(s=a.exec(b)){var O=b.slice(s[0].length);if(!O&&k||n&&(" "===O[0]||n===O.slice(0,n.length)))s=null;else{var T=s[1].split("#");T[0]&&(y.class=T[0]),T[1]&&(y.id=T[1]),b=O}}else{if($||A){if(s=i.exec(b)){m["padding-left"]=s[1].length+"em",b=b.slice(s[0].length);continue}if(s=c.exec(b)){m["padding-right"]=s[1].length+"em",b=b.slice(s[0].length);continue}}if((S||$||A)&&(s=_.exec(b))){var j=g[s[1]];S?y.align=j:m["text-align"]=j,b=b.slice(s[0].length)}else if("td"!==t&&"tr"!==t||!(s=p.exec(b))){if("td"===t){if(s=u.exec(b)){y.colspan=s[1],b=b.slice(s[0].length);continue}if(s=f.exec(b)){y.rowspan=s[1],b=b.slice(s[0].length);continue}}}else m["vertical-align"]=x[s[1]],b=b.slice(s[0].length)}while(s);var L=[];for(var E in m)L.push(E+":"+m[E]);return L.length?y.style=L.join(";"):delete y.style,b===e?void 0:[e.length-b.length,y]}}var a=/^\(([^\(\)\n]+)\)/,i=/^(\(+)/,c=/^(\)+)/,l=/^(<>|<|>|=)/,o=/^(<|>|=)/,p=/^(~|\^|\-)/,u=/^\\(\d+)/,f=/^\/(\d+)/,d=/^\{([^\}]*)\}/,h=/^\s*([^:\s]+)\s*:\s*(.+)\s*$/,v=/^\[([^\[\]\n]+)\]/,g={"<":"left","=":"center",">":"right","<>":"justify"},x={"~":"bottom","^":"top","-":"middle"};e.exports={copyAttr:n,parseAttr:s}},function(e,t,n){"use strict";var r=n(4),s=/(\w)'(\w)/g,a=/([^\-]|^)->/,i=r.compile(/([^\s\[\(])"(?=$|\s|[:punct:])/g),c=r.compile(/([^\s\[\(])'(?=$|\s|[:punct:])/g),l=/(\b ?|\s|^)(?:\(C\)|\[C\])/gi,o=/([\d\.,]+['"]? ?)x( ?)(?=[\d\.,]['"]?)/g,p=r.compile(/(\d*[\.,]?\d+)"(?=\s|$|[:punct:])/g),u=/([^.]?)\.{3}/g,f=/(^|[\s\w])--([\s\w]|$)/g,d=/ - /g,h=/"/g,v=/'/g,g=/(\b ?|\s|^)(?:\(R\)|\[R\])/gi,x=r.compile(/(\d*[\.,]?\d+)'(?=\s|$|[:punct:])/g),m=/(\b ?|\s|^)(?:\((?:TM|tm)\)|\[(?:TM|tm)\])/g;t.parseGlyph=function(e){return"string"!=typeof e?e:e.replace(a,"$1&#8594;").replace(o,"$1&#215;$2").replace(u,"$1&#8230;").replace(f,"$1&#8212;$2").replace(d," &#8211; ").replace(m,"$1&#8482;").replace(g,"$1&#174;").replace(l,"$1&#169;").replace(p,"$1&#8243;").replace(i,"$1&#8221;").replace(h,"&#8220;").replace(x,"$1&#8242;").replace(s,"$1&#8217;$2").replace(c,"$1&#8217;").replace(v,"&#8216;").replace(/[\(\[]1\/4[\]\)]/,"&#188;").replace(/[\(\[]1\/2[\]\)]/,"&#189;").replace(/[\(\[]3\/4[\]\)]/,"&#190;").replace(/[\(\[]o[\]\)]/,"&#176;").replace(/[\(\[]\+\/\-[\]\)]/,"&#177;")}},function(e,t){"use strict";t.txblocks="(?:b[qc]|div|notextile|pre|h[1-6]|fn\\d+|p|###)",t.ucaps="A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸŹŻŽƁƂƄƆƇƉ-ƋƎ-ƑƓƔƖ-ƘƜƝƟƠƢƤƦƧƩƬƮƯƱ-ƳƵƷƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺȻȽȾɁɃ-ɆɈɊɌɎḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾⱠⱢ-ⱤⱧⱩⱫⱭ-ⱰⱲⱵⱾⱿꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽꝾꞀꞂꞄꞆꞋꞍꞐꞒꞠꞢꞤꞦꞨꞪ",t.txcite=":((?:[^\\s()]|\\([^\\s()]+\\)|[()])+?)(?=[!-\\.:-@\\[\\\\\\]-`{-~]+(?:$|\\s)|$|\\s)";var n=t.attr_class="\\([^\\)]+\\)",r=t.attr_style="\\{[^\\}]+\\}",s=t.attr_lang="\\[[^\\[\\]]+\\]",a=t.attr_align="(?:<>|<|>|=)",i=t.attr_pad="[\\(\\)]+",c=t.txattr="(?:"+n+"|"+r+"|"+s+"|"+a+"|"+i+")*";t.txlisthd="[\\t ]*[\\#\\*]*(\\*|\\#(?:_|\\d+)?)"+c+"(?: +\\S|\\.\\s*(?=\\S|\\n))"},function(e,t,n){"use strict";function r(e){for(var t="\n";e--;)t+="\t";return t}function s(e){return v.exec(e)}function a(e,t){e=i(e.replace(/(^|\r?\n)[\t ]+/,"$1"));for(var n=[],s={},a=t._lst||{},c=0,o=void 0,u=void 0,d=void 0,h=void 0;u=g.exec(e);){var v=["li"],x=u[1].length,m="#"===u[1].substr(-1)?"ol":"ul",y=null,b=void 0,$=void 0,S=void 0,A=void 0;if((d=/^(_|\d+)/.exec(u[2]))&&(c=isFinite(d[1])?parseInt(d[1],10):a[x]||s[x]||1,u[2]=u[2].slice(d[1].length)),(S=p(u[2],"li"))&&(u[2]=u[2].slice(S[0]),S=S[1]),/^\.\s*$/.test(u[2]))o=S||{},e.advance(u[0]);else{for(;n.length<x;)b=[m,{},r(n.length+1),y=["li"]],$=n[n.length-1],$&&($.li.push(r(n.length)),$.li.push(b)),n.push({ul:b,li:y,att:0}),s[n.length]=1;for(;n.length>x;)A=n.pop(),A.ul.push(r(n.length)),1!==A.att||A.ul[3][1].substr||l(A.ul[1],A.ul[3].splice(1,1)[0]);$=n[n.length-1],c&&($.ul[1].start=c,s[x]=c,c=0),o&&($.att=9,l($.ul[1],o),o=null),y||($.ul.push(r(n.length),v),$.li=v),S&&($.li.push(S),$.att++),Array.prototype.push.apply($.li,f(u[2].trim(),t)),e.advance(u[0]),s[x]=(s[x]||0)+1}}for(t._lst=s;n.length;)h=n.pop(),h.ul.push(r(n.length)),1!==h.att||h.ul[3][1].substr||l(h.ul[1],h.ul[3].splice(1,1)[0]);return h.ul}var i=n(5),c=n(4),l=n(1),o=n(10),p=o.parseAttr,u=n(9),f=u.parsePhrase,d=n(12),h=d.txlisthd;c.pattern.txlisthd=h;var v=c.compile(/^((?:[:txlisthd:][^\0]*?(?:\r?\n|$))+)(\s*\n|$)/,"s"),g=c.compile(/^([#\*]+)([^\0]+?)(\n(?=[:txlisthd:])|$)/,"s");e.exports={testList:s,parseList:a}},function(e,t,n){"use strict";function r(e){return i.exec(e)}function s(e,t){e=a(e.trim());for(var r=n(9).parsePhrase,s=n(6).parseFlow,i=["dl","\n"],l=void 0,o=void 0,p=void 0;p=c.exec(e);){for(l=p[1].split(/(?:^|\n)\- /).slice(1);l.length;)i.push("\t",["dt"].concat(r(l.shift().trim(),t)),"\n");o=p[2].trim(),i.push("\t",["dd"].concat(/=:$/.test(o)?s(o.slice(0,-2).trim(),t):r(o,t)),"\n"),e.advance(p[0])}return i}var a=n(5),i=/^((?:- (?:[^\n]\n?)+?)+:=(?: *\n[^\0]+?=:(?:\n|$)|(?:[^\0]+?(?:$|\n(?=\n|- )))))+/,c=/^((?:- (?:[^\n]\n?)+?)+):=( *\n[^\0]+?=:\s*(?:\n|$)|(?:[^\0]+?(?:$|\n(?=\n|- ))))/;t.testDefList=r,t.parseDefList=s},function(e,t,n){"use strict";function r(e){var t=["colgroup",{}];return e.split("|").forEach(function(e,n){var r=n?{}:t[1],s=e.trim(),a=void 0;s&&((a=/^\\(\d+)/.exec(s))&&(r.span=+a[1],s=s.slice(a[0].length)),(a=p(s,"col"))&&(c(r,a[1]),s=s.slice(a[0])),(a=/\b\d+\b/.exec(s))&&(r.width=+a[0])),n&&t.push("\n\t\t",["col",r])}),t.concat(["\n\t"])}function s(e){return x.exec(e)}function a(e,t){e=l(e.trim());var n=[],s=void 0,a=void 0,i={},o=void 0,u=void 0,d=void 0,v=void 0,g=void 0,x=void 0,k=0,_=function(e,t){o=[e,t||{}],n.push(o)};(x=m.exec(e))&&(e.advance(x[0]),v=p(x[2],"table"),v&&c(i,v[1]),x[3]&&(i.summary=x[3])),(x=b.exec(e))&&(a=["caption"],(v=p(x[1],"caption"))&&(a.push(v[1]),x[1]=x[1].slice(v[0])),/\./.test(x[1])?(a.push(x[1].slice(1).replace(/\|\s*$/,"").trim()),k++,e.advance(x[0])):a=null);do{if(x=$.exec(e))s=r(x[1]),k++;else if(x=S.exec(e)){var w=A[x[1]]||"tbody";v=p(x[2]+" ",w),_(w,v&&v[1]),k++}else if(x=y.exec(e)){o||_("tbody"),u=["tr"],x[2]&&(v=p(x[2],"tr"))&&u.push(v[1]),o.push("\n\t\t",u),d=l(x[3]);do{d.save();var O=d.startsWith("_"),T=[O?"th":"td"];if(O&&d.advance(1),v=p(d,"td"),v&&(d.advance(v[0]),T.push(v[1])),v||O){var j=/^\.\s*/.exec(d);j?d.advance(j[0]):(T=["td"],d.load())}var L=/^(==.*?==|[^\|])*/.exec(d);T=T.concat(f(L[0],t)),u.push("\n\t\t\t",T),g="|"===d.valueOf().charAt(L[0].length),d.advance(L[0].length+1)}while(g);u.push("\n\t\t")}x&&e.advance(x[0])}while(x);var E=["table",i];return k?(a&&E.push("\n\t",a),s&&E.push("\n\t",s),n.forEach(function(e){E.push("\n\t",e.concat(["\n\t"]))})):E=E.concat(h(n[0].slice(2),-1)),E.push("\n"),E}var i=n(4),c=n(1),l=n(5),o=n(10),p=o.parseAttr,u=n(9),f=u.parsePhrase,d=n(2),h=d.reIndent,v=n(12),g=v.txattr;i.pattern.txattr=g;var x=i.compile(/^((?:table[:txattr:]\.(?:\s(.+?))\s*\n)?(?:(?:[:txattr:]\.[^\n\S]*)?\|.*?\|[^\n\S]*(?:\n|$))+)([^\n\S]*\n)?/,"s"),m=/^table(_?)([^\n]*?)\.(?:[ \t](.+?))?\s*\n/,y=i.compile(/^(?:\|([~\^\-][:txattr:])\.\s*\n)?([:txattr:]\.[^\n\S]*)?\|(.*?)\|[^\n\S]*(\n|$)/,"s"),b=/^\|=([^\n+]*)\n/,$=/^\|:([^\n+]*)\|[\r\t ]*\n/,S=/^\|([\^\-~])([^\n+]*)\.[ \t\r]*\n/,A={"^":"thead","~":"tfoot","-":"tbody"};e.exports={parseColgroup:r,parseTable:a,testTable:s}}])});
//# sourceMappingURL=textile.min.js.map